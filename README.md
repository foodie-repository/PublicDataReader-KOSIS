# PublicDataReader-KOSIS

## 프로젝트 소개

KOSIS(국가통계포털) 주택 건설 실적 데이터를 수집하고 분석하는 도구입니다.

## 주요 기능

- **착공실적**: 월별 주택 착공 실적 데이터 (2011년~현재)
- **인허가실적**: 월별 주택 인허가 실적 데이터 (2007년~현재)
- **준공실적**: 월별 주택 준공 실적 데이터 (2010년~현재)
- **미분양현황**: 시군구별 아파트 미분양 데이터 (2007년~현재)
  - 미분양
  - 준공 후 미분양
  - 미분양 종합 (미분양 + 준공 후 미분양 통합)

## 기술 스택

- Python 3.11+
- pandas: 데이터 분석 및 처리
- PublicDataReader: KOSIS 데이터 수집
- plotly: 동적 차트 및 그래프 시각화
- Jupyter: 노트북 기반 분석 환경
- uv: 패키지 관리

## 설치 방법

이 프로젝트는 [uv](https://github.com/astral-sh/uv)를 사용합니다.

### 1. uv 설치

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### 2. 프로젝트 설정

```bash
# 저장소 클론
git clone https://github.com/[username]/PublicDataReader-KOSIS.git
cd PublicDataReader-KOSIS

# 가상환경 생성 및 의존성 설치
uv sync

# 가상환경 활성화
source .venv/bin/activate  # macOS/Linux
# 또는
.venv\Scripts\activate  # Windows
```

## 사용 방법

### 착공실적 (월별 실적)

```bash
# Python 스크립트로 실행
uv run python 착공/착공.py

# Jupyter 노트북으로 실행
uv run jupyter notebook 착공/착공.ipynb
```

**데이터:**
- 기간: 2011년 1월 ~ 현재
- 지역: 전국 17개 시도
- 주택유형: 아파트, 단독, 다가구, 연립, 다세대
- 특성: 월별 실적 (월계)

**생성 파일:**
- `착공실적_시도별_YYYYMMDD.csv`: 원본 데이터
- `착공실적_피벗_전체기간_최종.csv`: 분석용 피벗 데이터

### 인허가실적 (월별 누계 → 차분 계산)

```bash
# Python 스크립트로 실행
uv run python 인허가/인허가.py

# Jupyter 노트북으로 실행
uv run jupyter notebook 인허가/인허가.ipynb
```

**데이터:**
- 기간: 2007년 1월 ~ 현재
- 지역: 전국 17개 시도
- 주택유형: 아파트, 단독, 다가구, 연립, 다세대
- 특성: 월별 누계 → 차분 계산으로 월별 실적 변환

**생성 파일:**
- `인허가실적_시도별_YYYYMMDD.csv`: 원본 데이터
- `인허가실적_피벗_전체기간_최종.csv`: 분석용 피벗 데이터 (차분 적용)

### 준공실적 (월별 실적)

```bash
# Python 스크립트로 실행
uv run python 준공/준공.py

# Jupyter 노트북으로 실행
uv run jupyter notebook 준공/준공.ipynb
```

**데이터:**
- 기간: 2010년 8월 ~ 현재
- 지역: 전국 17개 시도
- 주택유형: 아파트, 단독, 다가구, 연립, 다세대
- 특성: 월별 실적 (월계)

**생성 파일:**
- `준공실적_시도별_YYYYMMDD.csv`: 원본 데이터
- `준공실적_피벗_전체기간_최종.csv`: 분석용 피벗 데이터

### 미분양현황 (시군구별)

#### 미분양

```bash
# Python 스크립트로 실행
uv run python 미분양/미분양.py

# Jupyter 노트북으로 실행
uv run jupyter notebook 미분양/미분양.ipynb
```

**데이터:**
- 기간: 2007년 1월 ~ 현재
- 지역: 전국 17개 시도 + 시군구별 (215개)
- 주택유형: 아파트 미분양만 집계
- 특성: 월별 미분양 현황

**생성 파일:**
- `미분양현황_시군구별_YYYYMMDD.csv`: 원본 데이터
- `미분양현황_피벗_전체기간_최종.csv`: 분석용 피벗 데이터

#### 준공 후 미분양

```bash
# Python 스크립트로 실행
uv run python 미분양/준공_후_미분양.py

# Jupyter 노트북으로 실행
uv run jupyter notebook 미분양/준공_후_미분양.ipynb
```

**데이터:**
- 기간: 2010년 1월 ~ 현재
- 지역: 전국 17개 시도 + 시군구별 (216개)
- 부문: 전체 (공공+민간 합계)
- 규모: 전체 (모든 면적 합계)

**생성 파일:**
- `준공_후_미분양_시군구별_YYYYMMDD.csv`: 원본 데이터
- `준공_후_미분양_피벗_전체기간_최종.csv`: 분석용 피벗 데이터

#### 미분양 종합

```bash
# 통합 CSV 생성
uv run python 미분양/미분양_종합.py

# Jupyter 노트북으로 시각화
uv run jupyter notebook 미분양/미분양_종합.ipynb
```

**통합 데이터:**
- 미분양 + 준공 후 미분양 데이터 병합
- 기간: 2007년 1월 ~ 현재
- 컬럼:
  - `시점`: YYYY.MM 형식
  - `시도`: 정식 시도명
  - `시군구`: 시군구명
  - `미분양수`: 전체 미분양 수량
  - `준공_후_미분양수`: 준공 후 미분양 (미분양수에 포함)
  - `준공_전_미분양수`: 준공 전 미분양 (= 미분양수 - 준공_후_미분양수)

**생성 파일:**
- `미분양_종합.csv`: 통합 데이터 (50,303행 × 6열)

**시각화:**
- 전국/시도별/시군구별 누적 막대그래프
- '준공 전'(파란색) + '준공 후'(빨간색) 구분 표시

## 프로젝트 구조

```text
PublicDataReader-KOSIS/
├── 착공/
│   ├── 착공.py                              # 착공 실적 수집 스크립트
│   ├── 착공.ipynb                           # 착공 실적 시각화 노트북
│   ├── 착공실적_시도별_YYYYMMDD.csv              # 원본 데이터
│   └── 착공실적_피벗_전체기간_최종.csv             # 분석용 피벗 데이터
├── 인허가/
│   ├── 인허가.py                            # 인허가 실적 수집 스크립트 (차분 계산)
│   ├── 인허가.ipynb                         # 인허가 실적 시각화 노트북
│   ├── 인허가실적_시도별_YYYYMMDD.csv            # 원본 데이터
│   └── 인허가실적_피벗_전체기간_최종.csv           # 분석용 피벗 데이터 (차분 적용)
├── 준공/
│   ├── 준공.py                              # 준공 실적 수집 스크립트
│   ├── 준공.ipynb                           # 준공 실적 시각화 노트북
│   ├── 준공실적_시도별_YYYYMMDD.csv              # 원본 데이터
│   └── 준공실적_피벗_전체기간_최종.csv             # 분석용 피벗 데이터
├── 미분양/
│   ├── 미분양.py                            # 미분양 현황 수집 스크립트
│   ├── 미분양.ipynb                         # 미분양 현황 시각화 노트북
│   ├── 미분양현황_시군구별_YYYYMMDD.csv          # 원본 데이터
│   ├── 미분양현황_피벗_전체기간_최종.csv           # 분석용 피벗 데이터
│   ├── 준공_후_미분양.py                     # 준공 후 미분양 수집 스크립트
│   ├── 준공_후_미분양.ipynb                  # 준공 후 미분양 시각화 노트북
│   ├── 준공_후_미분양_시군구별_YYYYMMDD.csv      # 원본 데이터
│   ├── 준공_후_미분양_피벗_전체기간_최종.csv       # 분석용 피벗 데이터
│   ├── 미분양_종합.py                        # 미분양 종합 병합 스크립트
│   ├── 미분양_종합.ipynb                     # 미분양 종합 시각화 노트북
│   └── 미분양_종합.csv                       # 통합 데이터
├── Archive/                                # 아카이브 파일
├── .env.example                            # 환경변수 예시
├── .gitignore                              # Git 제외 파일 목록
├── pyproject.toml                          # 프로젝트 설정 및 의존성
├── uv.lock                                 # uv 의존성 잠금 파일
└── README.md                               # 프로젝트 문서
```

## 시각화 (Jupyter 노트북)

모든 노트북에는 다음과 같은 인터랙티브 시각화가 포함되어 있습니다:

### 착공/인허가/준공
- 전국 주택유형별 실적 추이
- 시도별 실적 비교
- 특정 시도의 주택유형별 추이
- 주택유형별 시도 비교

### 미분양/준공 후 미분양
- 전국 미분양 추이
- 시도별 미분양 비교
- 시군구별 Top 20
- 시도별 미분양 추이 비교

### 미분양 종합
- 전국 누적 막대그래프 (준공 전/후 구분)
- 시도별 누적 막대그래프
- 시군구별 누적 막대그래프

## 중요사항

- **착공실적, 준공실적**: 월별 실적 데이터 (차분 계산 불필요)
- **인허가실적**: 월별 누계 데이터 (차분 계산 필수)
- **미분양현황**: 아파트만 집계 (주택유형 구분 없음)
- **준공 후 미분양**: 부문·규모 전체 합계만 수집
- **미분양_종합**:
  - 준공_후_미분양수는 미분양수에 포함된 값
  - 준공_전_미분양수 = 미분양수 - 준공_후_미분양수
  - 시점 형식: YYYY.MM (월은 항상 2자리)
- **다가구**: 가구수 기준 (동수/가구수 중 가구수 사용)

## uv 주요 명령어

```bash
# 패키지 추가
uv add <패키지명>

# 패키지 제거
uv remove <패키지명>

# 의존성 동기화
uv sync

# Python 스크립트 실행
uv run python 착공/착공.py

# Jupyter 실행
uv run jupyter notebook
```

## 데이터 수집 흐름

### 공통 프로세스

1. **KOSIS API 초기화**: PublicDataReader의 Kosis 클래스 사용
2. **데이터 수집**: 전국 17개 시도별 월별 데이터 수집
3. **데이터 전처리**:
   - 소계/기타/총계 제외
   - 시도명 정식 명칭으로 변환
   - **인허가만**: 차분 계산으로 월별 실적 변환
4. **CSV 저장**: 원본 데이터 및 피벗 테이블 저장
5. **시각화**: Plotly를 사용한 인터랙티브 차트 생성

### 데이터 특성 구분

| 구분 | KOSIS 통계표 ID | 데이터 특성 | 차분 계산 |
|------|----------------|-----------|----------|
| 착공실적 | DT_MLTM_5387 | 월계 (월별 실적) | 불필요 |
| 인허가실적 | DT_MLTM_1948 | 월별 누계 | **필수** |
| 준공실적 | DT_MLTM_5373 | 월계 (월별 실적) | 불필요 |
| 미분양현황 | DT_1YL202004E | 월별 현황 | 불필요 |
| 준공 후 미분양 | DT_MLTM_5328 | 월별 현황 | 불필요 |

## 개발 환경

- Python: 3.11+
- OS: macOS/Linux/Windows
- 패키지 관리: uv

## 라이선스

개인 프로젝트용

## 참고 자료

- [PublicDataReader 문서](https://github.com/WooilJeong/PublicDataReader)
- [uv 공식 문서](https://docs.astral.sh/uv/)
- [KOSIS 국가통계포털](https://kosis.kr/)
- [Plotly Python 문서](https://plotly.com/python/)
